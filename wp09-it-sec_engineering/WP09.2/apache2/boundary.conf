<IfModule mod_ssl.c>
    <VirtualHost *:443>
        ServerName boundary.example.com

        SSLEngine on
        SSLProxyEngine on
        SSLProxyVerify none
        SSLProxyCheckPeerCN off
        SSLProxyCheckPeerName off
        SSLCertificateFile /etc/ssl/boundary/boundary.crt
        SSLCertificateKeyFile /etc/ssl/boundary/private.key

        # Enable Reverse Proxy
        ProxyRequests off

        <Proxy *>
            Require all granted
        </Proxy>
        # Allow access only to /v1/auth-methods and /v1/targets
        <Location /v1/auth-methods>
            ProxyPass "https://127.0.0.1:9200/v1/auth-methods" nocanon
            ProxyPassReverse "https://127.0.0.1:9200/v1/auth-methods"
            Require all granted
        </Location>

        <Location /v1/targets>
            ProxyPass "https://127.0.0.1:9200/v1/targets" nocanon
            ProxyPassReverse "https://127.0.0.1:9200/v1/targets"
            Require all granted
        </Location>

        # Block access to root "/" and everything else not specified
        #<Location "/">
        #    Require all denied
        #</Location>

        # Logging
        ErrorLog ${APACHE_LOG_DIR}/boundary.example.com_error.log
        CustomLog ${APACHE_LOG_DIR}/boundary.example.com_access.log combined
    </VirtualHost>
</IfModule>